#!/bin/bash
. "$(dirname "$0")/_/husky.sh"

# Load NVM to use the correct Node version from terminal scope
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

# Use the Node version specified in .nvmrc or the current terminal version
if [ -f ".nvmrc" ]; then
  nvm use
else
  # This will use the version currently active in your terminal
  nvm use 22
fi

echo "ğŸ” Running pre-commit checks..."
echo "ğŸ“Œ Node version: $(node --version)"

# Run ESLint
echo "ğŸ“ Checking code quality with ESLint..."
pnpm lint

# If you want to run type checking as well, uncomment the following:
# echo "ğŸ” Running TypeScript type check..."
# pnpm tsc --noEmit

echo "âœ… Pre-commit checks passed!"
